{% extends "layout.html" %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/partners.css') }}">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
    /* === MODERN SOFT UI STYLES === */
    :root {
        --primary-color: #0d6efd;
        --primary-light: rgba(13, 110, 253, 0.08);
        --soft-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        --hover-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        --card-bg: #ffffff;
        --bg-body: #f8fafc;
    }

    /* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –µ—Å—Ç—å –∫–ª–∞—Å—Å dark) */
    [data-bs-theme="dark"] :root {
        --card-bg: #1e1e1e;
        --bg-body: #121212;
        --primary-light: rgba(13, 110, 253, 0.2);
    }

    .modern-wrapper { font-family: 'Inter', sans-serif; background-color: var(--bg-body); }
    
    /* –ö–∞—Ä—Ç–æ—á–∫–∏-–ø–ª–∏—Ç–∫–∏ */
    .selection-card, .country-card, .job-card-label {
        cursor: pointer;
        display: block;
        position: relative;
        height: 100%;
        margin: 0;
    }
    
    /* –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–µ–∫ */
    .card-content, .country-content, .job-content {
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        border: 2px solid transparent;
        background: var(--card-bg);
        box-shadow: var(--soft-shadow);
    }

    .country-content:hover, .card-content:hover, .job-content:hover {
        transform: translateY(-2px);
        box-shadow: var(--hover-shadow);
    }

    /* –ê–ö–¢–ò–í–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï (–í—ã–±—Ä–∞–Ω–æ) */
    .selection-card input:checked + .card-content,
    .country-card input:checked + .country-content,
    .custom-checkbox-wrapper input:checked + .job-content {
        border-color: var(--primary-color);
        background-color: var(--card-bg);
        box-shadow: 0 0 0 4px var(--primary-light);
        transform: translateY(-2px);
    }

    /* –¶–≤–µ—Ç–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —à–∞–≥–∞ 1 */
    .selection-card input:checked + .card-content .icon-wrapper {
        background-color: var(--primary-color) !important;
        color: white !important;
    }

    /* –ì–∞–ª–æ—á–∫–∞ –≤ —É–≥–ª—É */
    .active-check { opacity: 0; transition: 0.2s; position: absolute; top: 12px; right: 12px; color: var(--primary-color); font-size: 1.2rem; }
    .selection-card input:checked + .card-content .active-check,
    .country-card input:checked + .country-content .active-check,
    .custom-checkbox-wrapper input:checked + .job-content .active-check { opacity: 1; }
    
    /* –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –≥–∞–ª–æ—á–∫–∏ –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –ø–ª–∏—Ç–æ–∫ —Å—Ç—Ä–∞–Ω */
    .country-card .active-check { top: 6px; right: 6px; font-size: 1rem; }

    /* –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∏–∫–æ–Ω–æ–∫ (–®–∞–≥ 1) */
    .icon-wrapper {
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
    }

    /* –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã */
    .form-step-card { border: 1px solid rgba(0,0,0,0.04); }
    .step-badge {
        width: 36px; height: 36px; background: #2c3e50; color: white;
        border-radius: 50%; display: flex; align-items: center; justify-content: center;
        font-weight: bold; margin: 0 auto 1rem auto;
        box-shadow: 0 4px 10px rgba(44, 62, 80, 0.2);
    }
    
    /* –ö–Ω–æ–ø–∫–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏ */
    .hover-scale { transition: transform 0.2s; }
    .hover-scale:hover { transform: scale(1.02); }
    
    .quick-select-btn.active-cat {
        background-color: #2c3e50 !important; color: white !important; border-color: #2c3e50 !important;
    }
</style>

<main class="modern-wrapper pb-5">

    <div id="js-messages" class="d-none">
        <span id="msg-selected" data-i18n="js_selected">–í—ã–±—Ä–∞–Ω–æ:</span>
        <span id="msg-nomatch" data-i18n="js_nomatch">–ù–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</span>
        <span id="msg-notfound" data-i18n="js_notfound">–ü—Ä–æ—Ñ–µ—Å—Å–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</span>
    </div>

    <section class="partners-modern-section pt-5 pb-3">
        <div class="container">
            <h6 class="trusted-heading text-center text-muted mb-4 small text-uppercase" style="letter-spacing: 1px; font-weight: 600;">
                –ù–∞–º –¥–æ–≤–µ—Ä—è—é—Ç –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–∞–Ω–Ω—ã–µ
            </h6>
            <div class="partners-grid opacity-75 hover-opacity-100 transition-all">
                <div class="partner-card"><div class="partner-logo remotive-new">Remotive</div></div>
                <div class="partner-card"><div class="partner-logo adzuna">Adzuna</div></div>
                <div class="partner-card"><div class="partner-logo jobicy">jobicy</div></div>
                <div class="partner-card"><div class="partner-logo careerjet">career<span>jet</span></div></div>
            </div>
        </div>
    </section>

    <section class="cibc-promo-modern py-4">
        <div class="container">
            <div class="p-4 p-lg-5 border-0 rounded-5 bg-white shadow-sm position-relative overflow-hidden">
                <div class="position-absolute top-0 end-0 opacity-10" style="width: 300px; height: 100%; background: linear-gradient(135deg, #FF4757 0%, #E31837 100%); clip-path: polygon(60% 0, 100% 0, 100% 100%, 40% 100%); pointer-events: none;"></div>
                <div class="row align-items-center position-relative" style="z-index: 2;">
                    <div class="col-lg-8">
                        <div class="badge bg-danger-subtle text-danger mb-3 px-3 py-2 rounded-pill fw-bold">STUDENT OFFER</div>
                        <h3 class="fw-bold mb-3">Get $25 Bonus with CIBC Smart for Students</h3>
                        <p class="text-muted mb-4" style="max-width: 600px;">
                            Open a <strong>CIBC International Student GIC</strong> to speed up your study permit via SDS. 
                            Use the referral email below during application to claim your reward.
                        </p>
                        <div class="d-flex flex-wrap align-items-center gap-3">
                            <a href="https://www.cibc.com/en/special-offers/isbo-refer-a-friend.html?utrc=E2084:1&utm_medium=Email&utm_campaign=ISBO-x-RAF-&" target="_blank" class="btn btn-dark rounded-pill px-4 py-2 fw-bold shadow-sm hover-scale">
                                Get Started
                            </a>
                            <div class="d-flex align-items-center bg-light border border-light rounded-pill p-1 ps-3">
                                <span class="small text-muted me-2">Referral Email:</span>
                                <code class="fw-bold text-dark me-2">tzvanguardia@gmail.com</code>
                                <button class="btn btn-sm btn-white rounded-circle shadow-sm" onclick="copyEmail(event)"><i class="bi bi-clipboard"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 d-none d-lg-block text-end opacity-25">
                         <div style="font-size: 80px; font-weight: 900; color: #8B0000; font-family: Arial, sans-serif;">CIBC</div>
                         <div class="small mt-1" style="color: #495057; font-weight: 600;">International Student Banking</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
    function copyEmail(event) {
        navigator.clipboard.writeText('tzvanguardia@gmail.com');
        const btn = event.currentTarget;
        const originalIcon = btn.innerHTML;
        btn.innerHTML = '<i class="bi bi-check2 text-success"></i>';
        setTimeout(() => { btn.innerHTML = originalIcon; }, 2000);
    }
    </script>

    <section class="hero-section text-center py-5">
        <div class="container py-3">
            <h1 class="display-4 fw-bolder mb-4 text-dark" data-i18n="–í–∞—à–∞ –Ω–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ ‚Äî –≤ –ª—é–±–æ–π —Ç–æ—á–∫–µ –º–∏—Ä–∞">
                –í–∞—à–∞ –Ω–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ ‚Äî –≤ –ª—é–±–æ–π —Ç–æ—á–∫–µ <span class="text-primary highlight-animated">–º–∏—Ä–∞</span>
            </h1>
            <p class="lead text-muted mb-5 mx-auto" style="max-width: 700px;" 
            data-i18n="–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π –¥–ª—è —É–∫—Ä–∞–∏–Ω—Ü–µ–≤. –ú—ã —É–±–∏—Ä–∞–µ–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º.">
                –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π –¥–ª—è —É–∫—Ä–∞–∏–Ω—Ü–µ–≤. –ú—ã —É–±–∏—Ä–∞–µ–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º.
            </p>
            <a href="#search-form-section" class="btn btn-primary btn-lg rounded-pill px-5 py-3 shadow-lg" data-i18n="–ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫">
                –ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫
            </a>
        </div>
    </section>

    <section id="search-form-section" class="pb-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-9 col-xl-8">
                    
                    <form id="job-search-form" novalidate class="d-flex flex-column gap-4">
                        
                        <div class="form-step-card bg-white p-4 p-md-5 rounded-5 shadow-sm">
                            <div class="step-badge">1</div>
                            <div class="text-center mb-4">
                                <h3 class="fw-bold mb-2">–í–∞—à —Å—Ç–∞—Ç—É—Å</h3>
                                <p class="text-muted">–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –Ω–∞–π—Ç–∏ –¥–ª—è –≤–∞—Å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –≤–∞–∫–∞–Ω—Å–∏–∏.</p>
                            </div>
                            
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="selection-card">
                                        <input class="form-check-input d-none" type="radio" name="is_refugee" value="true" id="refugee_yes" required>
                                        <div class="card-content p-4 rounded-4 text-center h-100">
                                            <div class="icon-wrapper mb-3 text-primary bg-primary-subtle rounded-circle mx-auto" style="width: 60px; height: 60px;">
                                                <i class="bi bi-passport fs-3"></i>
                                            </div>
                                            <strong class="d-block fs-5 mb-2">–î–∞, —è —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π –±–µ–∂–µ–Ω–µ—Ü</strong>
                                            <span class="text-muted small">(–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ—É 24)</span>
                                            <div class="active-check"><i class="bi bi-check-circle-fill"></i></div>
                                        </div>
                                    </label>
                                </div>
                                <div class="col-md-6">
                                    <label class="selection-card">
                                        <input class="form-check-input d-none" type="radio" name="is_refugee" value="false" id="refugee_no" required>
                                        <div class="card-content p-4 rounded-4 text-center h-100">
                                            <div class="icon-wrapper mb-3 text-secondary bg-secondary-subtle rounded-circle mx-auto" style="width: 60px; height: 60px;">
                                                <i class="bi bi-briefcase fs-3"></i>
                                            </div>
                                            <strong class="d-block fs-5 mb-2">–ù–µ—Ç, –æ–±—ã—á–Ω—ã–π –ø–æ–∏—Å–∫</strong>
                                            <span class="text-muted small">(–¥—Ä—É–≥–æ–µ –æ—Å–Ω–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã)</span>
                                            <div class="active-check"><i class="bi bi-check-circle-fill"></i></div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-step-card bg-white p-4 p-md-5 rounded-5 shadow-sm">
                            <div class="step-badge">2</div>
                            <div class="text-center mb-4">
                                <h3 class="fw-bold mb-2">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏</h3>
                            </div>

                            <div class="mb-5 text-center">
                                <p class="text-muted small text-uppercase fw-bold mb-3">–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:</p>
                                <div id="quick-select-buttons" class="d-flex flex-wrap justify-content-center gap-2">
                                    <button type="button" class="btn btn-light rounded-pill px-3 py-2 quick-select-btn border" onclick="selectJobCategory('transport', this)">üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</button>
                                    <button type="button" class="btn btn-light rounded-pill px-3 py-2 quick-select-btn border" onclick="selectJobCategory('restaurant', this)">üçΩÔ∏è –û–±—â–µ–ø–∏—Ç</button>
                                    <button type="button" class="btn btn-light rounded-pill px-3 py-2 quick-select-btn border" onclick="selectJobCategory('construction', this)">üèóÔ∏è –°—Ç—Ä–æ–π–∫–∞</button>
                                    <button type="button" class="btn btn-light rounded-pill px-3 py-2 quick-select-btn border" onclick="selectJobCategory('care', this)">üë• –£—Ö–æ–¥</button>
                                    <button type="button" class="btn btn-light rounded-pill px-3 py-2 quick-select-btn border" onclick="selectJobCategory('it', this)">üíª IT</button>
                                    <button type="button" class="btn btn-light rounded-pill px-3 py-2 quick-select-btn border" onclick="selectJobCategory('office', this)">üëî –û—Ñ–∏—Å –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
                                    <button type="button" class="btn btn-light rounded-pill px-3 py-2 quick-select-btn border" onclick="selectJobCategory('refugee', this)">üá∫üá¶ –î–ª—è —É–∫—Ä–∞–∏–Ω—Ü–µ–≤</button>
                                    <button type="button" class="btn btn-light rounded-pill px-3 py-2 quick-select-btn border" onclick="selectJobCategory('autoservice', this)">üõ† –ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å</button>
                                    <button type="button" class="btn btn-light rounded-pill px-3 py-2 quick-select-btn border" onclick="selectJobCategory('fuel', this)">‚õΩ –ê–ó–°</button>
                                    <button type="button" class="btn btn-light rounded-pill px-3 py-2 quick-select-btn border" onclick="selectJobCategory('oilgas', this)">üõ¢ –ù–µ—Ñ—Ç—å –∏ –≥–∞–∑</button>
                                    <button type="button" class="btn btn-light rounded-pill px-3 py-2 quick-select-btn border" onclick="selectJobCategory('other', this)">‚ú® –î—Ä—É–≥–æ–µ</button>
                                </div>
                            </div>

                            <div class="professions-grid">
                                {% for category, jobs in job_categories.items() %}
                                <div class="mb-4" data-category="{{ category }}">
                                    <h6 class="fw-bold text-primary mb-3 ps-3 border-start border-4 border-primary category-title">{{ category }}</h6>
                                    <div class="row g-2">
                                        {% set outer_loop_index = loop.index0 %}
                                        {% for job in jobs %}
                                        <div class="col-md-6 col-lg-4">
                                            <div class="custom-checkbox-wrapper position-relative h-100">
                                                <input class="form-check-input job-checkbox d-none" type="checkbox" name="selected_jobs" value="{{ job }}" id="job-{{ outer_loop_index }}-{{ loop.index0 }}">
                                                <label class="job-content w-100 p-3 rounded-3 d-flex align-items-center cursor-pointer h-100" for="job-{{ outer_loop_index }}-{{ loop.index0 }}">
                                                    <span class="fw-medium small">{{ job }}</span>
                                                    <div class="active-check"><i class="bi bi-check-circle-fill"></i></div>
                                                </label>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="form-step-card bg-white p-4 p-md-5 rounded-5 shadow-sm">
                            <div class="step-badge">3</div>
                            <div class="text-center mb-4">
                                <h3 class="fw-bold">–°—Ç—Ä–∞–Ω—ã –ø–æ–∏—Å–∫–∞</h3>
                            </div>
                            <div class="row g-2">
                                {% for code, info in countries.items() %}
                                <div class="col-6 col-sm-4 col-lg-3">
                                    <label class="country-card w-100" style="cursor: pointer;">
                                        <input class="form-check-input d-none" type="checkbox" name="countries" value="{{ code }}" id="country_{{ code }}" {% if code in ['de', 'pl'] %}checked{% endif %} 
                                            onchange="this.nextElementSibling.style.borderColor = this.checked ? '#0d6efd' : 'transparent'; this.nextElementSibling.querySelector('.active-check').style.opacity = this.checked ? '1' : '0';">
                                        
                                        <div class="country-content p-2 rounded-3 text-center h-100 d-flex flex-column align-items-center justify-content-center border" 
                                            style="position: relative; transition: all 0.2s; {% if code in ['de', 'pl'] %}border-color: #0d6efd;{% endif %}">
                                            
                                            <span class="fs-1 mb-1 d-block">
                                                {% if code == 'de' %}üá©üá™{% elif code == 'pl' %}üáµüá±{% elif code == 'cz' %}üá®üáø{% elif code == 'gb' %}üá¨üáß{% elif code == 'fr' %}üá´üá∑{% elif code == 'it' %}üáÆüáπ{% elif code == 'es' %}üá™üá∏{% elif code == 'nl' %}üá≥üá±{% elif code == 'ch' %}üá®üá≠{% elif code == 'be' %}üáßüá™{% elif code == 'se' %}üá∏üá™{% elif code == 'no' %}üá≥üá¥{% elif code == 'at' %}üá¶üáπ{% elif code == 'us' %}üá∫üá∏{% elif code == 'ca' %}üá®üá¶{% else %}üåç{% endif %}
                                            </span>

                                            <span class="fw-medium small text-muted" style="font-size: 0.85rem;">{{ info.name }}</span>
                                            
                                            <div class="active-check" style="position: absolute; top: 5px; right: 5px; color: #0d6efd; transition: opacity 0.2s; {% if code in ['de', 'pl'] %}opacity: 1;{% else %}opacity: 0;{% endif %}">
                                                <i class="bi bi-check-circle-fill"></i>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="form-step-card bg-white p-4 p-md-5 rounded-5 shadow-sm">
                            <div class="step-badge">4</div>
                            <div class="text-center mb-4">
                                <h3 class="fw-bold">–ì–æ—Ä–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</h3>
                            </div>
                            <div class="position-relative">
                                <i class="bi bi-geo-alt position-absolute text-muted fs-4" style="left: 20px; top: 50%; transform: translateY(-50%);"></i>
                                <input type="text" class="form-control form-control-lg border-2 rounded-pill ps-5 py-3 shadow-inset" name="city" data-i18n="attr=placeholder" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Berlin, –í–∞—Ä—à–∞–≤–∞, Munich, –ö—Ä–∞–∫–æ–≤..." style="font-size: 1.1rem;">
                            </div>
                            
                            <div class="mt-4 d-flex gap-3 align-items-start text-muted bg-light p-3 rounded-4">
                                <i class="bi bi-lightbulb-fill text-warning fs-5 flex-shrink-0"></i>
                                <div class="small">
                                    <strong>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞:</strong> 
                                    <br>‚Ä¢ <strong>–ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è</strong> (Berlin, Warsaw, Paris) –¥–∞—é—Ç —Å–∞–º—ã–µ —Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                                    <br>‚Ä¢ <strong>–†—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è</strong> –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ —Ç–æ–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è  
                                    <br>‚Ä¢ <strong>–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º</strong> –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–µ
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-center mt-3 mb-5">
                            <button type="submit" class="btn btn-primary btn-lg rounded-pill px-5 py-4 fs-4 fw-bold shadow-lg hover-scale w-100 w-md-auto">
                                üöÄ –ù–∞–π—Ç–∏ —Ä–∞–±–æ—Ç—É
                            </button>

                            <div id="loading-message" class="mt-4" style="display: none; opacity: 0; transition: all 0.5s ease;">
                                <div class="p-3 bg-white rounded-4 shadow-sm d-inline-block border">
                                    <div class="spinner-border text-primary me-2" role="status"></div>
                                    <span class="text-dark fw-medium">–ò—â–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏ –ø–æ –≤—Å–µ–º —Å–∞–π—Ç–∞–º... –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ –º–∏–Ω—É—Ç—ã.</span>
                                </div>
                            </div>

                            <div class="mt-5 pt-4 border-top">
                                <div class="row justify-content-center">
                                    <div class="col-md-8 col-lg-6">
                                        <h6 class="fw-bold mb-3">üìß –ü–æ–ª—É—á–∞—Ç—å –Ω–æ–≤—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏ –Ω–∞ email</h6>
                                        <p class="text-muted small mb-3">‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∏ —Å—Ç—Ä–∞–Ω—ã –≤—ã—à–µ, –Ω–∞–∂–º–∏—Ç–µ "–ù–∞–π—Ç–∏ —Ä–∞–±–æ—Ç—É", –∑–∞—Ç–µ–º –ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å</p>
                                        <div class="input-group shadow-sm rounded-pill overflow-hidden border">
                                            <input type="email" class="form-control border-0 ps-4" id="subscribe-email" placeholder="–í–∞—à email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π">
                                            <button class="btn btn-dark px-4" type="button" onclick="subscribeToEmails()">
                                                <i class="bi bi-envelope me-1"></i>–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
                                            </button>
                                        </div>
                                        <div class="mt-2">
                                            <a href="javascript:void(0)" onclick="showManageSubscriptionInfo(); return false;" class="text-muted small text-decoration-none">‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π</a>
                                        </div>
                                        <p class="text-muted mt-3 small"><i class="bi bi-shield-check"></i> –ë–µ—Å–ø–ª–∞—Ç–Ω–æ, –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
</main>

<script src="{{ url_for('static', filename='js/categories.js') }}"></script>

<script>
// === –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ß–¢–ï–ù–ò–Ø –ü–ï–†–ï–í–û–î–û–í –ò–ó HTML ===
function getJsMsg(id, fallback) {
    const el = document.getElementById(id);
    return el ? el.innerText : fallback;
}

function selectJobCategory(category, buttonElement) {
    // 1. –°–±—Ä–æ—Å —Å—Ç–∏–ª–µ–π –∫–Ω–æ–ø–æ–∫
    document.querySelectorAll('.quick-select-btn').forEach(btn => {
        btn.classList.remove('active-cat');
        btn.classList.remove('btn-dark');
        btn.classList.add('btn-light');
    });
    // 2. –ê–∫—Ç–∏–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞
    buttonElement.classList.remove('btn-light');
    buttonElement.classList.add('active-cat');

    // 3. –°–±—Ä–æ—Å —á–µ–∫–±–æ–∫—Å–æ–≤
    document.querySelectorAll('.job-checkbox').forEach(cb => cb.checked = false);

    const baseMap = (window.CATEGORY_MAP || {});
    const jobsToSelect = baseMap[category] || [];

    // –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
    const msgNotFound = getJsMsg('msg-notfound', '–ü—Ä–æ—Ñ–µ—Å—Å–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');

    if (!jobsToSelect.length) {
        showTemporaryMessage(msgNotFound, 'warning');
        return;
    }

    let selectedCount = 0;
    document.querySelectorAll('.job-checkbox').forEach(checkbox => {
        const jobTitle = checkbox.value;
        if (jobsToSelect.includes(jobTitle)) {
            checkbox.checked = true;
            selectedCount++;
        }
    });

    // –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    const msgSelected = getJsMsg('msg-selected', '–í—ã–±—Ä–∞–Ω–æ:');
    const msgNoMatch = getJsMsg('msg-nomatch', '–ù–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π');

    if (selectedCount > 0) {
        showTemporaryMessage(`${msgSelected} ${selectedCount}`, 'success');
    } else {
        showTemporaryMessage(msgNoMatch, 'warning');
    }
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –∫–∞–∫ –µ—Å—Ç—å, –∏–º–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ª—É—á—à–µ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ —Å–ª–æ–≤–∞—Ä—å, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
function getReadableCategoryName(category) {
    const names = {
        'transport': '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç', 'restaurant': '–û–±—â–µ–ø–∏—Ç', 'construction': '–°—Ç—Ä–æ–π–∫–∞',
        'care': '–£—Ö–æ–¥', 'it': 'IT', 'refugee': '–î–ª—è —É–∫—Ä–∞–∏–Ω—Ü–µ–≤', 'autoservice': '–ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å',
        'fuel': '–ê–ó–°', 'oilgas': '–ù–µ—Ñ—Ç—å –∏ –≥–∞–∑', 'office': '–û—Ñ–∏—Å –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ'
    };
    return names[category] || category;
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–∫—Ä–∞—Å–∏–≤–∞—è, —Å–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞)
function showTemporaryMessage(message, type = 'info') {
    document.querySelectorAll('.temp-message').forEach(msg => msg.remove());

    const messageDiv = document.createElement('div');
    messageDiv.className = `alert alert-${type === 'success' ? 'success' : type === 'warning' ? 'warning' : 'info'} temp-message`;
    messageDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        animation: slideInRight 0.3s ease-out;
        max-width: 400px;
        font-weight: 500;
        background-color: ${type === 'success' ? '#d1e7dd' : '#fff3cd'};
    `;
    const icon = type === 'success' ? '‚úÖ' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è';
    messageDiv.innerHTML = `<div class="d-flex align-items-center gap-2"><span>${icon}</span> <span>${message}</span></div>`;

    if (!document.querySelector('#temp-message-styles')) {
        const style = document.createElement('style');
        style.id = 'temp-message-styles';
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    }
    document.body.appendChild(messageDiv);

    setTimeout(() => {
        messageDiv.style.animation = 'slideOutRight 0.3s ease-in';
        setTimeout(() => { messageDiv.remove(); }, 300);
    }, 3000);
}
</script>

<script src="{{ url_for('static', filename='app.js') }}"></script>
{% endblock %}