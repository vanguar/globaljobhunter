{% extends "layout.html" %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/partners.css') }}">

<main>
    <section class="partners-modern-section">
    <div class="container">
        <h6 class="trusted-heading text-center mb-4">–ù–∞–º –¥–æ–≤–µ—Ä—è—é—Ç –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–∞–Ω–Ω—ã–µ</h6>
        <div class="partners-grid">
            <div class="partner-card">
                <div class="partner-logo remotive-new">Remotive</div>
            </div>
            <div class="partner-card">
                <div class="partner-logo adzuna">Adzuna</div>
            </div>
            <div class="partner-card">
                <div class="partner-logo jobicy">jobicy</div>
            </div>
            <div class="partner-card">
                <div class="partner-logo careerjet">career<span>jet</span></div>
            </div>
        </div>
    </div>
</section>

    <section class="hero-section">
        <div class="container">
            <h1 class="display-4 fw-bold mb-3">
                –í–∞—à–∞ –Ω–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ ‚Äî –≤ –ª—é–±–æ–π —Ç–æ—á–∫–µ <span class="highlight-animated" data-i18n="–º–∏—Ä–∞">–º–∏—Ä–∞</span>
            </h1>
            <p class="lead"
            data-i18n="–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π –¥–ª—è —É–∫—Ä–∞–∏–Ω—Ü–µ–≤. –ú—ã —É–±–∏—Ä–∞–µ–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º.">
            –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π –¥–ª—è —É–∫—Ä–∞–∏–Ω—Ü–µ–≤. –ú—ã —É–±–∏—Ä–∞–µ–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º.
            </p>
            <a href="#search-form-section" class="btn btn-primary btn-lg">
                <i class="bi bi-search me-2"></i>–ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫
            </a>
        </div>
    </section>

    <section id="search-form-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10 col-xl-8">
                    <form id="job-search-form" novalidate>
                        
                        <div class="form-step-card">
                            <div class="form-step-header">
                                <span class="step-number">1</span>
                                <h4>–í–∞—à —Å—Ç–∞—Ç—É—Å</h4>
                            </div>
                            <p class="text-muted">–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –Ω–∞–π—Ç–∏ –¥–ª—è –≤–∞—Å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –≤–∞–∫–∞–Ω—Å–∏–∏.</p>
                            <div class="row">
                                <div class="col-md-6 mb-2">
                                    <div class="form-check p-3 border rounded">
                                        <input class="form-check-input" type="radio" name="is_refugee" value="true" id="refugee_yes" required>
                                        <label class="form-check-label" for="refugee_yes">
                                            <strong class="d-block">–î–∞, —è —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π –±–µ–∂–µ–Ω–µ—Ü</strong>
                                            (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ—É 24)
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-2">
                                    <div class="form-check p-3 border rounded">
                                        <input class="form-check-input" type="radio" name="is_refugee" value="false" id="refugee_no" required>
                                        <label class="form-check-label" for="refugee_no">
                                            <strong class="d-block">–ù–µ—Ç, –æ–±—ã—á–Ω—ã–π –ø–æ–∏—Å–∫</strong>
                                            (–¥—Ä—É–≥–æ–µ –æ—Å–Ω–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã)
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-step-card">
                            <div class="form-step-header">
                                <span class="step-number">2</span>
                                <h4>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏</h4>
                            </div>
                            <div class="mb-4">
                                <p class="text-muted mb-2">–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:</p>
                                <div id="quick-select-buttons" class="d-flex flex-wrap gap-2">
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('transport', this)">üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('restaurant', this)">üçΩÔ∏è –û–±—â–µ–ø–∏—Ç</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('construction', this)">üèóÔ∏è –°—Ç—Ä–æ–π–∫–∞</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('care', this)">üë• –£—Ö–æ–¥</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('it', this)">üíª IT</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('office', this)">üëî –û—Ñ–∏—Å –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('refugee', this)">üá∫üá¶ –î–ª—è —É–∫—Ä–∞–∏–Ω—Ü–µ–≤</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('autoservice', this)">üõ† –ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('fuel', this)">‚õΩ –ê–ó–°</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('oilgas', this)">üõ¢ –ù–µ—Ñ—Ç—å –∏ –≥–∞–∑</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('other', this)">‚ú® –î—Ä—É–≥–æ–µ</button>
                                </div>
                            </div>

                            {% for category, jobs in job_categories.items() %}
                            <div class="mb-3" data-category="{{ category }}">
                                <h6 class="fw-bold text-secondary mb-3 pt-2 border-top">{{ category }}</h6>
                                <div class="row">
                                    {% set outer_loop_index = loop.index0 %}
                                    {% for job in jobs %}
                                    <div class="col-md-6 col-lg-4 mb-2">
                                        <div class="form-check">
                                            <input class="form-check-input job-checkbox" type="checkbox" name="selected_jobs" value="{{ job }}" id="job-{{ outer_loop_index }}-{{ loop.index0 }}">
                                            <label class="form-check-label" for="job-{{ outer_loop_index }}-{{ loop.index0 }}">{{ job }}</label>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            {% endfor %}
                        </div>

                        <div class="form-step-card">
                            <div class="form-step-header">
                                <span class="step-number">3</span>
                                <h4>–°—Ç—Ä–∞–Ω—ã –ø–æ–∏—Å–∫–∞</h4>
                            </div>
                            <div class="row">
                                {% for code, info in countries.items() %}
                                <div class="col-md-6 col-lg-4 mb-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="countries" value="{{ code }}" id="country_{{ code }}" {% if code in ['de', 'pl'] %}checked{% endif %}>
                                        <label class="form-check-label" for="country_{{ code }}">{{ info.name }}</label>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="form-step-card">
                            <div class="form-step-header">
                                <span class="step-number">4</span>
                                <h4>–ì–æ—Ä–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</h4>
                            </div>
                            <input type="text" class="form-control form-control-lg" name="city" data-i18n="attr=placeholder" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Berlin, –í–∞—Ä—à–∞–≤–∞, Munich, –ö—Ä–∞–∫–æ–≤...">
                            
                            <div class="alert alert-info mt-3 py-2" style="font-size: 0.9rem; border-radius: 8px;">
                                <div class="d-flex align-items-start">
                                    <i class="bi bi-info-circle-fill me-2 text-info" style="margin-top: 2px;"></i>
                                    <div>
                                        <strong>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞:</strong> 
                                        <br>‚Ä¢ <strong>–ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è</strong> (Berlin, Warsaw, Paris) –¥–∞—é—Ç —Å–∞–º—ã–µ —Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                                        <br>‚Ä¢ <strong>–†—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è</strong> –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ —Ç–æ–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è  
                                        <br>‚Ä¢ <strong>–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º</strong> –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–µ
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-center mt-4">
                            <button type="submit" class="btn btn-primary btn-lg px-5 py-3">
                                üöÄ –ù–∞–π—Ç–∏ —Ä–∞–±–æ—Ç—É
                            </button>

                            <div id="loading-message" class="mt-3 text-center" style="display: none; height: 0; opacity: 0; transition: all 0.5s ease;">
                                <div class="d-flex justify-content-center align-items-center">
                                    <div class="spinner-grow spinner-grow-sm text-primary me-2" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                    <p class="text-muted mb-0">–ò—â–µ–º –≤–∞–∫–∞–Ω—Å–∏–∏ –ø–æ –≤—Å–µ–º —Å–∞–π—Ç–∞–º... –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ –º–∏–Ω—É—Ç—ã, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ.</p>
                                </div>
                            </div>

                            <div class="text-center mt-4 pt-4 border-top">
                                <h5 class="mb-3">üìß –ü–æ–ª—É—á–∞—Ç—å –Ω–æ–≤—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏ –Ω–∞ email</h5>
                                <p class="text-muted mb-3">‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∏ —Å—Ç—Ä–∞–Ω—ã –≤—ã—à–µ, –Ω–∞–∂–º–∏—Ç–µ "–ù–∞–π—Ç–∏ —Ä–∞–±–æ—Ç—É", –∑–∞—Ç–µ–º –ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å</p>
                                <div class="row justify-content-center">
                                    <div class="col-md-6">
                                        <div class="input-group">
                                            <input type="email" class="form-control" id="subscribe-email" placeholder="–í–∞—à email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π">
                                            <button class="btn btn-outline-primary" type="button" onclick="subscribeToEmails()">
                                                <i class="bi bi-envelope me-1"></i>–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
                                            </button>
                                        </div>
                                        <small class="text-muted mt-2 d-block">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –≤–∞–∫–∞–Ω—Å–∏—è—Ö</small>
                                        <small class="text-muted">
                                            <a href="javascript:void(0)" onclick="showManageSubscriptionInfo(); return false;">‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π</a>
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <p class="text-muted mt-3"><i class="bi bi-shield-check"></i> –ë–µ—Å–ø–ª–∞—Ç–Ω–æ, –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
</main>

<script src="{{ url_for('static', filename='js/categories.js') }}"></script>

<script>
// –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–±–µ—Ä—ë—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ window.CATEGORY_MAP)
function selectJobCategory(category, buttonElement) {
    // —Å–±—Ä–æ—Å –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
    document.querySelectorAll('.quick-select-btn').forEach(btn => {
        btn.classList.remove('btn-primary');
        btn.classList.add('btn-outline-secondary');
    });
    buttonElement.classList.remove('btn-outline-secondary');
    buttonElement.classList.add('btn-primary');

    // —Å–Ω—è—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö —á–µ–∫–±–æ–∫—Å–æ–≤
    document.querySelectorAll('.job-checkbox').forEach(cb => cb.checked = false);

    // –±–µ—Ä—ë–º —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –∏–∑ categories.js
    const baseMap = (window.CATEGORY_MAP || {});
    const jobsToSelect = baseMap[category] || [];

    if (!jobsToSelect.length) {
        showTemporaryMessage(`–ü—Ä–æ—Ñ–µ—Å—Å–∏–∏ –¥–ª—è "${getReadableCategoryName(category)}" –Ω–µ –Ω–∞–π–¥–µ–Ω—ã`, 'warning');
        return;
    }

    let selectedCount = 0;
    document.querySelectorAll('.job-checkbox').forEach(checkbox => {
        const jobTitle = checkbox.value;
        if (jobsToSelect.includes(jobTitle)) {
            checkbox.checked = true;
            selectedCount++;
        }
    });

    if (selectedCount > 0) {
        showTemporaryMessage(`–í—ã–±—Ä–∞–Ω–æ ${selectedCount} –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${getReadableCategoryName(category)}"`, 'success');
    } else {
        showTemporaryMessage(`–°–æ–≤–ø–∞–¥–µ–Ω–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${getReadableCategoryName(category)}" –Ω–µ –Ω–∞–π–¥–µ–Ω–æ —Å—Ä–µ–¥–∏ —Ç–µ–∫—É—â–µ–≥–æ –Ω–∞–±–æ—Ä–∞`, 'warning');
    }
}

// –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∫–Ω–æ–ø–∫–∏ "–û—Ñ–∏—Å –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"
function getReadableCategoryName(category) {
    const names = {
        'transport': '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç',
        'restaurant': '–û–±—â–µ–ø–∏—Ç',
        'construction': '–°—Ç—Ä–æ–π–∫–∞',
        'care': '–£—Ö–æ–¥',
        'it': 'IT',
        'refugee': '–î–ª—è —É–∫—Ä–∞–∏–Ω—Ü–µ–≤',
        'autoservice': '–ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å',
        'fuel': '–ê–ó–°',
        'oilgas': '–ù–µ—Ñ—Ç—å –∏ –≥–∞–∑',
        'office': '–û—Ñ–∏—Å –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ'
    };
    return names[category] || category;
}

function showTemporaryMessage(message, type = 'info') {
    // —É–¥–∞–ª–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    document.querySelectorAll('.temp-message').forEach(msg => msg.remove());

    const messageDiv = document.createElement('div');
    messageDiv.className = `alert alert-${type === 'success' ? 'success' : type === 'warning' ? 'warning' : 'info'} temp-message`;
    messageDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        animation: slideInRight 0.3s ease-out;
        max-width: 400px;
        font-weight: 500;
    `;
    const icon = type === 'success' ? '‚úÖ' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è';
    messageDiv.innerHTML = `${icon} ${message}`;

    if (!document.querySelector('#temp-message-styles')) {
        const style = document.createElement('style');
        style.id = 'temp-message-styles';
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    }
    document.body.appendChild(messageDiv);

    setTimeout(() => {
        messageDiv.style.animation = 'slideOutRight 0.3s ease-in';
        setTimeout(() => { messageDiv.remove(); }, 300);
    }, 3000);
}
</script>

<script src="{{ url_for('static', filename='app.js') }}"></script>
{% endblock %}