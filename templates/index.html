{% extends "layout.html" %}

{% block content %}
<main>
    <section class="hero-section">
        <div class="container">
            <h1 class="display-4 fw-bold mb-3">
            –í–∞—à–∞ –Ω–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ ‚Äî –≤ –ª—é–±–æ–π —Ç–æ—á–∫–µ <span class="highlight-animated">–º–∏—Ä–∞</span>
        </h1>
                    <p class="lead">
                –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –≤–∞–∫–∞–Ω—Å–∏–π –¥–ª—è —É–∫—Ä–∞–∏–Ω—Ü–µ–≤. –ú—ã —É–±–∏—Ä–∞–µ–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º.
            </p>
            <a href="#search-form-section" class="btn btn-primary btn-lg">
                <i class="bi bi-search me-2"></i>–ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫
            </a>
        </div>
    </section>

    <section id="search-form-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10 col-xl-8">
                    <form id="job-search-form" novalidate>
                        
                        <div class="form-step-card">
                            <div class="form-step-header">
                                <span class="step-number">1</span>
                                <h4>–í–∞—à —Å—Ç–∞—Ç—É—Å</h4>
                            </div>
                            <p class="text-muted">–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –Ω–∞–π—Ç–∏ –¥–ª—è –≤–∞—Å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –≤–∞–∫–∞–Ω—Å–∏–∏.</p>
                            <div class="row">
                                <div class="col-md-6 mb-2">
                                    <div class="form-check p-3 border rounded">
                                        <input class="form-check-input" type="radio" name="is_refugee" value="true" id="refugee_yes" required>
                                        <label class="form-check-label" for="refugee_yes">
                                            <strong class="d-block">–î–∞, —è —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π –±–µ–∂–µ–Ω–µ—Ü</strong>
                                            (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ—É 24)
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-2">
                                    <div class="form-check p-3 border rounded">
                                        <input class="form-check-input" type="radio" name="is_refugee" value="false" id="refugee_no" required>
                                        <label class="form-check-label" for="refugee_no">
                                            <strong class="d-block">–ù–µ—Ç, –æ–±—ã—á–Ω—ã–π –ø–æ–∏—Å–∫</strong>
                                            (–¥—Ä—É–≥–æ–µ –æ—Å–Ω–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã)
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –ù–û–í–´–ô –ë–õ–û–ö: –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏ –≤ —Å–∞–º–æ–º –≤–µ—Ä—Ö—É -->
                        <div class="form-step-card featured-search-card">
                            <div class="form-step-header featured-header">
                                <span class="step-number featured-number">üéØ</span>
                                <div>
                                    <h4>–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é</h4>
                                    <small class="text-muted">–í–≤–µ–¥–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–∞–∫–∞–Ω—Å–∏—é –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞</small>
                                </div>
                            </div>
                            <div class="featured-input-container">
                                <input type="text" class="form-control form-control-lg featured-input" name="job_title" 
                                       placeholder="üîç –ù–∞–ø—Ä–∏–º–µ—Ä: Software Engineer, –í–æ–¥–∏—Ç–µ–ª—å, Kellner, Data Analyst, Fahrer...">
                                <div class="featured-input-overlay">
                                    <i class="bi bi-lightning-charge"></i>
                                </div>
                            </div>
                            
                            <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–∏—Å–∫–∞ –ø—Ä—è–º–æ –≤ —Å–∏–Ω–µ–º –±–ª–æ–∫–µ -->
                            <div class="text-center mb-3">
                                <button type="submit" class="btn btn-warning btn-lg px-4 py-2 featured-search-btn">
                                    <i class="bi bi-search me-2"></i>üöÄ –ù–∞–π—Ç–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
                                </button>
                            </div>
                            
                            <!-- –ö—Ä–∞—Å–∏–≤–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ —Å –Ω–æ–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º -->
                            <div class="featured-tip">
                                <div class="tip-icon">üí°</div>
                                <div class="tip-content">
                                    <div class="tip-title">–°–µ–∫—Ä–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞:</div>
                                    <div class="tip-grid">
                                        <div class="tip-item">
                                            <span class="tip-emoji">üåç</span>
                                            <span><strong>–ù–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º:</strong> Software Engineer, Data Analyst</span>
                                        </div>
                                        <div class="tip-item">
                                            <span class="tip-emoji">üè≥Ô∏è</span>
                                            <span><strong>–ù–∞ –º–µ—Å—Ç–Ω–æ–º —è–∑—ã–∫–µ:</strong> Fahrer, Kellner, Chauffeur</span>
                                        </div>
                                        <div class="tip-item">
                                            <span class="tip-emoji">‚ö°</span>
                                            <span><strong>–ú–æ–∂–Ω–æ –æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞</strong> –¥–ª—è –ª—É—á—à–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞</span>
                                        </div>
                                        <div class="tip-item">
                                            <span class="tip-emoji">üìã</span>
                                            <span><strong>–ò–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</strong> –Ω–∏–∂–µ</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å "–ò–õ–ò" -->
                        <div class="divider-section">
                            <div class="divider-line"></div>
                            <div class="divider-text">–ò–õ–ò –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π</div>
                            <div class="divider-line"></div>
                        </div>

                        <div class="form-step-card">
                            <div class="form-step-header">
                                <span class="step-number">2</span>
                                <h4>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h4>
                            </div>
                             <div class="mb-4">
                                <p class="text-muted mb-2">–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:</p>
                                <div id="quick-select-buttons" class="d-flex flex-wrap gap-2">
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('transport', this)">üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('restaurant', this)">üçΩÔ∏è –û–±—â–µ–ø–∏—Ç</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('construction', this)">üèóÔ∏è –°—Ç—Ä–æ–π–∫–∞</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('care', this)">üë• –£—Ö–æ–¥</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('it', this)">üíª IT</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('refugee', this)">üá∫üá¶ –î–ª—è —É–∫—Ä–∞–∏–Ω—Ü–µ–≤</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('autoservice', this)">üõ† –ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å –∏ —Ç–µ—Ö–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('fuel', this)">‚õΩ –ê–ó–° –∏ —Ç–æ–ø–ª–∏–≤–æ</button>
                                    <button type="button" class="btn btn-outline-secondary quick-select-btn" onclick="selectJobCategory('oilgas', this)">üõ¢ –ù–µ—Ñ—Ç—å –∏ –≥–∞–∑</button>

                                </div>
                            </div>

                            {% for category, jobs in job_categories.items() %}
                            <div class="mb-3" data-category="{{ category }}">
                                <h6 class="fw-bold text-secondary mb-3 pt-2 border-top">{{ category }}</h6>
                                <div class="row">
                                    {% set outer_loop_index = loop.index0 %}
                                    {% for job in jobs %}
                                    <div class="col-md-6 col-lg-4 mb-2">
                                        <div class="form-check">
                                            {# –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£–±—Ä–∞–Ω —Ñ–∏–ª—å—Ç—Ä 'slugify', –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ —Ü–∏–∫–ª–æ–≤ –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ #}
                                            <input class="form-check-input job-checkbox" type="checkbox" name="selected_jobs" value="{{ job }}" id="job-{{ outer_loop_index }}-{{ loop.index0 }}">
                                            <label class="form-check-label" for="job-{{ outer_loop_index }}-{{ loop.index0 }}">{{ job }}</label>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            {% endfor %}
                        </div>

                        <div class="form-step-card">
                            <div class="form-step-header">
                                <span class="step-number">3</span>
                                <h4>–°—Ç—Ä–∞–Ω—ã –ø–æ–∏—Å–∫–∞</h4>
                            </div>
                            <div class="row">
                                {% for code, info in countries.items() %}
                                <div class="col-md-6 col-lg-4 mb-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="countries" value="{{ code }}" id="country_{{ code }}" {% if code in ['de', 'pl'] %}checked{% endif %}>
                                        <label class="form-check-label" for="country_{{ code }}">{{ info.name }}</label>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="form-step-card">
                            <div class="form-step-header">
                                <span class="step-number">4</span>
                                <h4>–ì–æ—Ä–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</h4>
                            </div>
                            <input type="text" class="form-control form-control-lg" name="city" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Berlin, –í–∞—Ä—à–∞–≤–∞, Munich, –ö—Ä–∞–∫–æ–≤...">
                            
                            <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –≥–æ—Ä–æ–¥–∞ -->
                            <div class="alert alert-info mt-3 py-2" style="font-size: 0.9rem; border-radius: 8px;">
                                <div class="d-flex align-items-start">
                                    <i class="bi bi-geo-alt-fill me-2 text-info" style="margin-top: 2px;"></i>
                                    <div>
                                        <strong>üìç –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –≥–æ—Ä–æ–¥–∞:</strong> 
                                        <br>‚Ä¢ <strong>–ê–Ω–≥–ª–∏–π—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è</strong> (Berlin, Warsaw, Paris) –¥–∞—é—Ç —Å–∞–º—ã–µ —Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                                        <br>‚Ä¢ <strong>–†—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è</strong> –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤ —Ç–æ–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è  
                                        <br>‚Ä¢ <strong>–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º</strong> –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–µ
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-center mt-4">
                            <button type="submit" class="btn btn-primary btn-lg px-5 py-3">
                                üöÄ –ù–∞–π—Ç–∏ —Ä–∞–±–æ—Ç—É
                            </button>

                            <!-- –î–û–ë–ê–í–ò–¢–¨ –≠–¢–û–¢ –ë–õ–û–ö –ø–æ—Å–ª–µ –∫–Ω–æ–ø–∫–∏ "–ù–∞–π—Ç–∏ —Ä–∞–±–æ—Ç—É" -->
                            <!-- –î–û–ë–ê–í–ò–¢–¨ –≠–¢–û–¢ –ë–õ–û–ö –ø–æ—Å–ª–µ –∫–Ω–æ–ø–∫–∏ "–ù–∞–π—Ç–∏ —Ä–∞–±–æ—Ç—É" -->
                            <div class="text-center mt-4 pt-4 border-top">
                                <h5 class="mb-3">üìß –ü–æ–ª—É—á–∞—Ç—å –Ω–æ–≤—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏ –Ω–∞ email</h5>
                                <p class="text-muted mb-3">‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∏ —Å—Ç—Ä–∞–Ω—ã –≤—ã—à–µ, –Ω–∞–∂–º–∏—Ç–µ "–ù–∞–π—Ç–∏ —Ä–∞–±–æ—Ç—É", –∑–∞—Ç–µ–º –ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å</p>
                                <div class="row justify-content-center">
                                    <div class="col-md-6">
                                        <div class="input-group">
                                            <input type="email" class="form-control" id="subscribe-email" placeholder="–í–∞—à email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π">
                                            <button class="btn btn-outline-primary" type="button" onclick="subscribeToEmails()">
                                                <i class="bi bi-envelope me-1"></i>–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
                                            </button>
                                        </div>
                                        <small class="text-muted mt-2 d-block">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –≤–∞–∫–∞–Ω—Å–∏—è—Ö</small>
                                        <small class="text-muted">
                                            <a href="javascript:void(0)" onclick="showManageSubscriptionInfo(); return false;">‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π</a>
                                        </small>
                                    </div>
                                </div>
                            </div>
                            <p class="text-muted mt-3"><i class="bi bi-shield-check"></i> –ë–µ—Å–ø–ª–∞—Ç–Ω–æ, –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
</main>

<!-- –í–û–¢ –ó–î–ï–°–¨ –ü–†–ê–í–ò–õ–¨–ù–û –î–û–ë–ê–í–õ–ï–ù JAVASCRIPT -->
<script>
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–æ–ø–æ–∫ –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π
function selectJobCategory(category, buttonElement) {
    console.log('–í—ã–±—Ä–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è:', category);
    
    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
    document.querySelectorAll('.quick-select-btn').forEach(btn => {
        btn.classList.remove('btn-primary');
        btn.classList.add('btn-outline-secondary');
    });
    
    // –î–µ–ª–∞–µ–º —Ç–µ–∫—É—â—É—é –∫–Ω–æ–ø–∫—É –∞–∫—Ç–∏–≤–Ω–æ–π
    buttonElement.classList.remove('btn-outline-secondary');
    buttonElement.classList.add('btn-primary');
    
    // –°–Ω–∏–º–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö —á–µ–∫–±–æ–∫—Å–æ–≤
    document.querySelectorAll('.job-checkbox').forEach(checkbox => {
        checkbox.checked = false;
    });
    
    // –ú–∞–ø–ø–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –≤ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–µ
    const categoryMap = {
        'transport': [
            '–í–æ–¥–∏—Ç–µ–ª—å —Ç–∞–∫—Å–∏',
            '–í–æ–¥–∏—Ç–µ–ª—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ B', 
            '–í–æ–¥–∏—Ç–µ–ª—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ C',
            '–í–æ–¥–∏—Ç–µ–ª—å-–∫—É—Ä—å–µ—Ä',
            '–ö—É—Ä—å–µ—Ä –ø–µ—à–∫–æ–º',
            '–ö—É—Ä—å–µ—Ä-–¥–æ—Å—Ç–∞–≤—â–∏–∫ –µ–¥—ã',
            '–í–æ–¥–∏—Ç–µ–ª—å –∞–≤—Ç–æ–±—É—Å–∞',
            '–í–æ–¥–∏—Ç–µ–ª—å –≥—Ä—É–∑–æ–≤–∏–∫–∞'
        ],
        'restaurant': [
            '–û—Ñ–∏—Ü–∏–∞–Ω—Ç',
            '–ë–∞—Ä–º–µ–Ω',
            '–ü–æ–≤–∞—Ä',
            '–ü–æ–º–æ—â–Ω–∏–∫ –ø–æ–≤–∞—Ä–∞',
            '–ü–æ—Å—É–¥–æ–º–æ–π—â–∏–∫',
            '–ö–∞—Å—Å–∏—Ä',
            '–ü—Ä–æ–¥–∞–≤–µ—Ü'
        ],
        'construction': [
            '–°—Ç—Ä–æ–∏—Ç–µ–ª—å-—Ä–∞–∑–Ω–æ—Ä–∞–±–æ—á–∏–π',
            '–ì—Ä—É–∑—á–∏–∫',
            '–°–∫–ª–∞–¥—Å–∫–æ–π —Ä–∞–±–æ—Ç–Ω–∏–∫',
            '–†–∞–∑–Ω–æ—Ä–∞–±–æ—á–∏–π',
            '–†–∞–±–æ—á–∏–π –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ'
        ],
        'care': [
            '–ú–µ–¥—Å–µ—Å—Ç—Ä–∞',
            '–°–∏–¥–µ–ª–∫–∞',
            '–ù—è–Ω—è',
            '–ì—É–≤–µ—Ä–Ω–∞–Ω—Ç–∫–∞',
            '–£—Ö–æ–¥ –∑–∞ –ø–µ–Ω—Å–∏–æ–Ω–µ—Ä–∞–º–∏',
            '–£–±–æ—Ä—â–∏–∫',
            '–°–∞–¥–æ–≤–Ω–∏–∫',
            '–î–æ–º—Ä–∞–±–æ—Ç–Ω–∏—Ü–∞',
            '–ú–∞—Å—Å–∞–∂–∏—Å—Ç'
        ],
        'it': [
            'Python —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫',
            '–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫',
            '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç',
            '–î–∞—Ç–∞-–∞–Ω–∞–ª–∏—Ç–∏–∫',
            '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
            '–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫'
        ],
        'refugee': [
            '–†–∞–±–æ—Ç–∞ –¥–ª—è —É–∫—Ä–∞–∏–Ω—Ü–µ–≤',
            '–ü—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏',
            '–ü–µ—Ä–µ–≤–æ–¥—á–∏–∫ —É–∫—Ä–∞–∏–Ω—Å–∫–æ–≥–æ',
            '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–µ–∂–µ–Ω—Ü–µ–≤',
            '–†–∞–±–æ—Ç–∞ –±–µ–∑ —è–∑—ã–∫–∞ –¥–ª—è —É–∫—Ä–∞–∏–Ω—Ü–µ–≤'
        ],
        'autoservice': [
            '–ê–≤—Ç–æ–º–µ—Ö–∞–Ω–∏–∫',
            '–ê–≤—Ç–æ—Å–ª–µ—Å–∞—Ä—å',
            '–®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂–Ω–∏–∫',
            '–î–∏–∞–≥–Ω–æ—Å—Ç',
            '–ú–∞—Å—Ç–µ—Ä-–ø—Ä–∏—ë–º—â–∏–∫',
            '–ö—É–∑–æ–≤—â–∏–∫',
            '–ú–∞–ª—è—Ä –ø–æ –∞–≤—Ç–æ'
        ],
        'fuel': [
            '–ó–∞–ø—Ä–∞–≤—â–∏–∫ –Ω–∞ –ê–ó–°',
            '–û–ø–µ—Ä–∞—Ç–æ—Ä –ê–ó–°',
            '–ö–∞—Å—Å–∏—Ä –Ω–∞ –ê–ó–°'
        ],
        'oilgas': [
            '–û–ø–µ—Ä–∞—Ç–æ—Ä –¥–æ–±—ã—á–∏',
            '–ü–æ–º–æ—â–Ω–∏–∫ –±—É—Ä–∏–ª—å—â–∏–∫–∞',
            '–†–∞–±–æ—á–∏–π –Ω–µ—Ñ—Ç–µ–±–∞–∑—ã'
        ]
    };
    
    // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    const jobsToSelect = categoryMap[category] || [];
    
    if (jobsToSelect.length === 0) {
        console.warn('–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏–ª–∏ –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π:', category);
        return;
    }
    
    console.log('–ü—Ä–æ—Ñ–µ—Å—Å–∏–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞:', jobsToSelect);
    
    // –û—Ç–º–µ—á–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —á–µ–∫–±–æ–∫—Å—ã
    let selectedCount = 0;
    document.querySelectorAll('.job-checkbox').forEach(checkbox => {
        const jobTitle = checkbox.value;
        if (jobsToSelect.includes(jobTitle)) {
            checkbox.checked = true;
            selectedCount++;
            console.log('–í—ã–±—Ä–∞–Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è:', jobTitle);
        }
    });
    
    console.log(`–í—ã–±—Ä–∞–Ω–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π: ${selectedCount} –∏–∑ ${jobsToSelect.length}`);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    if (selectedCount > 0) {
        showTemporaryMessage(`–í—ã–±—Ä–∞–Ω–æ ${selectedCount} –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${getReadableCategoryName(category)}"`, 'success');
    } else {
        showTemporaryMessage(`–ü—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${getReadableCategoryName(category)}" –Ω–µ –Ω–∞–π–¥–µ–Ω—ã`, 'warning');
    }
}

function getReadableCategoryName(category) {
    const names = {
        'transport': '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç',
        'restaurant': '–û–±—â–µ–ø–∏—Ç',
        'construction': '–°—Ç—Ä–æ–π–∫–∞',
        'care': '–£—Ö–æ–¥',
        'it': 'IT',
        'refugee': '–î–ª—è —É–∫—Ä–∞–∏–Ω—Ü–µ–≤',
        'autoservice': '–ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å –∏ —Ç–µ—Ö–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ',
        'fuel': '–ê–ó–° –∏ —Ç–æ–ø–ª–∏–≤–æ',
        'oilgas': '–ù–µ—Ñ—Ç—å –∏ –≥–∞–∑'
    };
    return names[category] || category;
}

function showTemporaryMessage(message, type = 'info') {
    const existingMessages = document.querySelectorAll('.temp-message');
    existingMessages.forEach(msg => msg.remove());
    
    const messageDiv = document.createElement('div');
    messageDiv.className = `alert alert-${type === 'success' ? 'success' : type === 'warning' ? 'warning' : 'info'} temp-message`;
    messageDiv.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 9999;
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        animation: slideInRight 0.3s ease-out;
        max-width: 400px;
        font-weight: 500;
    `;
    
    const icon = type === 'success' ? '‚úÖ' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è';
    messageDiv.innerHTML = `${icon} ${message}`;
    
    if (!document.querySelector('#temp-message-styles')) {
        const style = document.createElement('style');
        style.id = 'temp-message-styles';
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    }
    
    document.body.appendChild(messageDiv);
    
    setTimeout(() => {
        messageDiv.style.animation = 'slideOutRight 0.3s ease-in';
        setTimeout(() => {
            if (messageDiv.parentNode) {
                messageDiv.remove();
            }
        }, 300);
    }, 3000);
}

// –î–û–ë–ê–í–ò–¢–¨ –í –ö–û–ù–ï–¶ –°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û JAVASCRIPT –í index.html:

// –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
document.getElementById('job-search-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    console.log('üîç –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã...');
    
    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
    const formData = new FormData(this);
    const jobTitle = formData.get('job_title')?.trim();
    const selectedJobs = formData.getAll('selected_jobs');
    const countries = formData.getAll('countries');
    const isRefugee = formData.get('is_refugee');
    
    console.log('üìù –î–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã:', {
        jobTitle,
        selectedJobs: selectedJobs.length,
        countries: countries.length,
        isRefugee
    });
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –±–µ–∂–µ–Ω—Ü–∞
    if (!isRefugee) {
        showTemporaryMessage('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Å—Ç–∞—Ç—É—Å', 'error');
        return;
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –ò–õ–ò –Ω–∞–∑–≤–∞–Ω–∏—è –≤–∞–∫–∞–Ω—Å–∏–∏
    const hasJobTitle = jobTitle && jobTitle.length > 0;
    const hasSelectedJobs = selectedJobs && selectedJobs.length > 0;
    
    if (!hasJobTitle && !hasSelectedJobs) {
        showTemporaryMessage('‚ùå –í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –ø—Ä–æ—Ñ–µ—Å—Å–∏—é –ò–õ–ò –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏', 'error');
        return;
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä–∞–Ω—ã
    if (!countries || countries.length === 0) {
        showTemporaryMessage('‚ùå –í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å—Ç—Ä–∞–Ω—É –¥–ª—è –ø–æ–∏—Å–∫–∞', 'error');
        return;
    }
    
    console.log('‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ');
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    const submitBtn = this.querySelector('button[type="submit"]');
    const originalText = submitBtn.innerHTML;
    submitBtn.innerHTML = '<i class="bi bi-arrow-repeat spin"></i> –ò—â–µ–º...';
    submitBtn.disabled = true;
    
    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º FormData –≤ –æ–±—ã—á–Ω—ã–π –æ–±—ä–µ–∫—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ JSON
    const searchData = {
        is_refugee: isRefugee,
        selected_jobs: selectedJobs,
        countries: countries,
        city: formData.get('city')?.trim() || '',
        job_title: jobTitle || ''
    };
    
    console.log('üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ:', searchData);
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
    fetch('/search', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(searchData)
    })
    .then(response => response.json())
    .then(data => {
        console.log('üì• –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', data);
        
        if (data.success) {
            // –£—Å–ø–µ—à–Ω—ã–π –ø–æ–∏—Å–∫
            showTemporaryMessage(`‚úÖ –ù–∞–π–¥–µ–Ω–æ ${data.jobs_count} –≤–∞–∫–∞–Ω—Å–∏–π –∑–∞ ${data.search_time}—Å`, 'success');
            
            // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            setTimeout(() => {
                window.location.href = data.redirect_url;
            }, 1000);
        } else {
            // –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞
            showTemporaryMessage(`‚ùå ${data.error}`, 'error');
            
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
        }
    })
    .catch(error => {
        console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:', error);
        showTemporaryMessage('‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º', 'error');
        
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
    });
});

// –î–æ–±–∞–≤–ª—è–µ–º CSS –¥–ª—è —Å–ø–∏–Ω–Ω–µ—Ä–∞
if (!document.querySelector('#spinner-styles')) {
    const style = document.createElement('style');
    style.id = 'spinner-styles';
    style.textContent = `
        .spin {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    `;
    document.head.appendChild(style);
}
</script>

{% endblock %}