<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>GlobalJobHunter · Mini</title>

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root {
      --bg:#ffffff; --text:#1d2939; --muted:rgba(0,0,0,.6); --border:rgba(0,0,0,.08);
    }
    body{ background:var(--bg); color:var(--text); font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif; }
    .wrap{ max-width:680px; margin:0 auto; padding:14px; }
    .card-mini{ border-radius:12px; border:1px solid var(--border); padding:12px; margin-bottom:10px; }
    .muted{ color:var(--muted); }
    .brand img{ height:48px; width:auto }
    .job{ padding:12px; border:1px solid var(--border); border-radius:12px; margin-bottom:10px }
    /* Remotive banner */
    .banner-remotive{ border:1px dashed var(--border); border-radius:12px; padding:12px; }
    .banner-remotive .title{ font-weight:600; }
    .banner-remotive .small{ font-size:.9rem; }
    /* Footer */
    .mini-footer{ font-size:.9rem; opacity:.85; }
    .mini-footer a{ text-decoration:none }
    .sep{ opacity:.35; padding:0 .45rem }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Brand -->
    <div class="d-flex align-items-center gap-3 brand mb-4">
      <img src="/static/images/Logo.png" alt="GlobalJobHunter">
      <div>
        <div class="fw-bold" style="font-size:1.2rem;">GlobalJobHunter</div>
        <div class="muted" data-i18n="brand_subtitle">Jobs across Europe</div>
      </div>
    </div>

    <!-- Step 1: Language -->
    <div id="lang-step" class="card-mini">
      <div class="fw-semibold mb-2">Choose your language</div>
      <div class="d-flex flex-wrap gap-2">
        <button class="btn btn-sm btn-outline-primary lang-btn" data-lang="en">English</button>
        <button class="btn btn-sm btn-outline-primary lang-btn" data-lang="uk">Українська</button>
        <button class="btn btn-sm btn-outline-primary lang-btn" data-lang="ru">Русский</button>
      </div>
    </div>

    <!-- Step 2: Intro + Search -->
    <div id="main-step" style="display:none;">
      <div class="card-mini mb-3">
        <div class="fw-semibold mb-1" data-i18n="intro_title">What is this?</div>
        <div class="muted" data-i18n="intro_text">
          GlobalJobHunter is a free meta-search for jobs. We aggregate vacancies from Adzuna, Careerjet, Jobicy and Remotive.
          No registration required — search, see results in real time, stop anytime.
        </div>
      </div>

      <h6 class="mb-2" data-i18n="search_title">Quick search</h6>
      <div class="mb-3">
        <label class="form-label" data-i18n="label_profession">Profession / keyword</label>
        <input id="q" class="form-control" placeholder="python developer / driver / cook">
      </div>

      <div class="mb-3">
        <label class="form-label" data-i18n="label_country">Country</label>
        <select id="country" class="form-select">
          <option value="">{{ '-- any --' }}</option>
          <option value="de">Germany</option>
          <option value="pl">Poland</option>
          <option value="cz">Czechia</option>
          <option value="at">Austria</option>
          <option value="nl">Netherlands</option>
          <option value="es">Spain</option>
          <option value="pt">Portugal</option>
          <option value="it">Italy</option>
          <option value="ro">Romania</option>
        </select>
      </div>

      <div class="d-flex gap-2 mb-3">
        <button id="btnSearch" class="btn btn-primary" data-i18n="btn_search">Search</button>
        <button id="btnStop" class="btn btn-outline-secondary" disabled data-i18n="btn_stop">Stop</button>
      </div>

      <!-- поток вакансий -->
      <div id="status" class="muted mb-2"></div>
      <div id="list"></div>

      <!-- Remotive CPA баннер -->
      <div id="remotive-banner" class="banner-remotive mt-3" style="display:none;">
        <div class="title mb-1" data-i18n="remotive_title">35,000+ curated remote jobs</div>
        <div class="small muted mb-2" data-i18n="remotive_text">
          Want access to more high-quality remote listings? Try Remotive Accelerator — lifetime access for $79.
        </div>
        <a id="remotive-link" class="btn btn-sm btn-outline-primary" target="_blank" rel="noopener noreferrer" data-i18n="remotive_cta">
          Learn more
        </a>
      </div>

      <!-- Footer: атрибуция + ссылка на полную версию -->
      <div class="mini-footer mt-4">
        <div class="muted">
          <span data-i18n="sources_label">Sources:</span>
          <a href="https://www.adzuna.com/" target="_blank" rel="nofollow noopener">Adzuna</a>
          <span class="sep">•</span>
          <a href="https://www.careerjet.com/partners/" target="_blank" rel="nofollow noopener">Careerjet</a>
          <span class="sep">•</span>
          <a href="https://jobicy.com/" target="_blank" rel="nofollow noopener">Jobicy</a>
          <span class="sep">•</span>
          <a href="https://remotive.com/" target="_blank" rel="nofollow noopener">Remotive</a>
        </div>
        <div class="mt-2">
          <span data-i18n="full_site_hint">Want full experience?</span>
          <a id="full-site-link" href="https://globaljobhunter.vip" target="_blank" rel="noopener">
            globaljobhunter.vip
          </a>
        </div>
      </div>
    </div>
  </div>

  <script src="/static/tg/localization_tg.js"></script>
  <script src="/static/tg/webapp_tg.js" defer></script>

  <script>
    // адаптация цветов под тему Telegram
    (function(){
      const tg = window.Telegram?.WebApp;
      if (tg) {
        tg.expand(); tg.ready();
        if (tg.themeParams) {
          document.documentElement.style.setProperty('--bg', tg.themeParams.bg_color || '#fff');
          document.documentElement.style.setProperty('--text', tg.themeParams.text_color || '#1d2939');
          document.documentElement.style.setProperty('--muted', tg.themeParams.hint_color || 'rgba(0,0,0,.6)');
        }
      }
    })();
  </script>
</body>
</html>
